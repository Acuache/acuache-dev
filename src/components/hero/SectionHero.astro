---
import { Github, LinkedIn } from "@components/icons";
import { Image } from "astro:assets";
import fotoAcuache from "../../assets/Acuache.png";
import SkillsMarquee from "@components/hero/SkillsMarquee.astro";
---

<section
  class="flex flex-col gap-2 sm:flex-row sm:items-center mt-20 scroll-mt-24"
  id="section-hero"
>
  <div class="flex flex-col gap-2 sm:basis-1/5 md:basis-1/2">
    <h1 class="title text-5xl text-st xs:text-6xl x white lg:text-7xl">
      MICHAEL <br /> ACUACHE
    </h1>
    <span class="subtitle text-xl xs:text-2xl">Desarrollador Web</span>
    <p class="description text-sm text-balance xs:text-base">
      El código es mi herramienta, la experiencia del usuario mi objetivo.
      Diseño y desarrollo experiencias digitales que conectan personas, marcas y
      tecnología de forma simple, útil y atractiva.
    </p>
    <div class="flex gap-4 items-center">
      <a
        aria-label="Ir al Github de Michael Acuache"
        href="https://github.com/Acuache"
        class="social-link relative flex items-center justify-center rounded-2xl border border-white/20 bg-white/5 p-2 transition-all duration-300 hover:border-st/80 hover:bg-white/10 hover:shadow-[0_0_20px_rgba(0,255,153,0.35)]"
      >
        <Github
          class="relative size-6 transition-transform duration-300 group-hover:scale-110"
        />
      </a>
      <a
        aria-label="Ir al LinkedIn de Michael Acuache"
        href="https://www.linkedin.com/in/acuache/"
        class="social-link relative flex items-center justify-center rounded-2xl border border-white/20 bg-white/5 p-2 transition-all duration-300 hover:border-st/80 hover:bg-white/10 hover:shadow-[0_0_20px_rgba(0,255,153,0.35)]"
      >
        <LinkedIn class="size-6" />
      </a>
      <a
        href="https://drive.google.com/file/d/13Ix9Sq3Lpjg3x39kyVGp27Zx2Dy1Zjxh/view?usp=drive_link"
        target="_blank"
        class="cv-link py-2 px-5 duration-300 hover:text-st relative group"
      >
        <span
          class="absolute top-0 left-0 w-2 h-2 border-st border-t-2 border-l-2 group-hover:w-full group-hover:h-full duration-300"
        ></span>
        <span
          class="absolute right-0 bottom-0 w-2 h-2 border-st border-b-2 border-r-2 group-hover:w-full group-hover:h-full duration-300"
        ></span>
        Ver CV</a
      >
    </div>
  </div>
  <div class="image max-w-85 mx-auto sm:basis-4/5 md:max-w-100 md:basis-1/2">
    <Image
      src={fotoAcuache}
      alt="Foto de perfil Michael Acuache"
      layout="constrained"
      class="inset-shadow-2xl inset-shadow-red-700"
    />
  </div>
</section>
<SkillsMarquee />

<script>
  const handleAstroLoad = () => {
    const title = document.querySelector(".title");
    const subtitle = document.querySelector(".subtitle");
    const image = document.querySelector(".image");
    const description = document.querySelector(".description");
    const socialLinks = document.querySelectorAll(".social-link");
    const cvLink = document.querySelector(".cv-link");

    if (!title || !subtitle || !image || !description || !cvLink) return;

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            observer.unobserve(entry.target);
          }
        });
      },
      {
        root: null,
        rootMargin: "0px",
        threshold: 0.2,
      }
    );

    [title, subtitle, image, description].forEach((element) =>
      observer.observe(element)
    );

    socialLinks.forEach((link) => observer.observe(link));
    observer.observe(cvLink);
  };
  document.addEventListener("astro:page-load", handleAstroLoad);
  document.addEventListener("DOMContentLoaded", handleAstroLoad);
</script>

<style>
  .title,
  .subtitle,
  .image,
  .description,
  .social-link,
  .cv-link {
    transition-duration: 500ms;
    transition-timing-function: ease-out;
    transition-property: opacity, transform;
    opacity: 0;
  }

  .title {
    transform: translateX(-80px);
  }

  .subtitle,
  .description {
    transform: translateX(-80px);
    transition-delay: 500ms;
  }

  .image {
    transform: translateX(80px);
  }

  .social-link {
    transform: translateY(40px);
  }

  .social-link:nth-child(1) {
    transition-delay: 600ms;
  }

  .social-link:nth-child(2) {
    transition-delay: 800ms;
  }

  .cv-link {
    transform: translateY(40px);
    transition-delay: 1000ms;
  }

  .title.visible,
  .subtitle.visible,
  .image.visible,
  .description.visible,
  .social-link.visible,
  .cv-link.visible {
    opacity: 1;
    transform: translate(0px, 0px);
  }
</style>
